
const runs = [
    {"agent":"Mozilla/5.0 (X11; Linux x86_64; rv:72.0) Gecko/20100101 Firefox/72.0","results":[["Test Case","WebSQL (ms)","IndexedDB (ms)","Diff (ms)","Percentage"],["Table5Columns: Insert 1000 rows",-1,197],["Table5Columns: Query with filters [[\"col0\",\"Green\"]]",-1,14],["Table5Columns: Query with filters [[\"col2\",\"Red\"],[\"col4\",\"Blue\"]]",-1,27],["Table5Columns: Query with filters [[\"guid\",\"500\"]]",-1,2],["Table5Columns: Insert 10000 rows",-1,922],["Table5Columns: Insert 50000 rows",-1,6204],["Table10Columns: Insert 1000 rows",-1,290],["Table10Columns: Insert 10000 rows",-1,2079],["Table10Columns: Insert 50000 rows",-1,9603],["Table15Columns: Insert 1000 rows",-1,213],["Table15Columns: Insert 10000 rows",-1,2220],["Table15Columns: Insert 50000 rows",-1,9395],["Table20Columns: Insert 1000 rows",-1,257],["Table20Columns: Insert 10000 rows",-1,2260],["Table20Columns: Insert 50000 rows",-1,12632],["Table20Columns: Query with filters [[\"col0\",\"Green\"]]",-1,572],["Table20Columns: Query with filters [[\"col2\",\"Red\"],[\"col6\",\"Blue\"]]",-1,1093],["Table20Columns: Query with filters [[\"guid\",\"25000\"]]",-1,1]]},
    {"agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.87 Safari/537.36","results":[["Test Case","WebSQL (ms)","IndexedDB (ms)","Diff (ms)","Percentage"],["Table5Columns: Insert 1000 rows",43.61,159.39,115.78,365.49],["Table5Columns: Query with filters [[\"col0\",\"Green\"]]",3.07,29.59,26.52,963.84],["Table5Columns: Query with filters [[\"col2\",\"Red\"],[\"col4\",\"Blue\"]]",4.92,51.87,46.95,1054.27],["Table5Columns: Query with filters [[\"guid\",\"500\"]]",1.91,1.32,-0.59,69.11],["Table5Columns: Insert 10000 rows",284.1,1433.35,1149.25,504.52],["Table5Columns: Insert 50000 rows",888.98,7971.42,7082.44,896.69],["Table10Columns: Insert 1000 rows",45.91,2058.49,2012.58,4483.75],["Table10Columns: Insert 10000 rows",260.91,1872.58,1611.67,717.71],["Table10Columns: Insert 50000 rows",1442.24,13297.96,11855.72,922.04],["Table15Columns: Insert 1000 rows",53.62,5195.44,5141.82,9689.37],["Table15Columns: Insert 10000 rows",411.75,2898.44,2486.69,703.93],["Table15Columns: Insert 50000 rows",2033.82,18943.63,16909.81,931.43],["Table20Columns: Insert 1000 rows",73.49,4991.85,4918.36,6792.56],["Table20Columns: Insert 10000 rows",595.88,3397.53,2801.65,570.17],["Table20Columns: Insert 50000 rows",2391.03,22132.86,19741.83,925.66],["Table20Columns: Query with filters [[\"col0\",\"Green\"]]",219.53,2910.56,2691.03,1325.81],["Table20Columns: Query with filters [[\"col2\",\"Red\"],[\"col6\",\"Blue\"]]",334.98,2083.89,1748.91,622.09],["Table20Columns: Query with filters [[\"guid\",\"25000\"]]",11.23,6.48,-4.75,57.7]]},
    {"agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36","results":[["Test Case","WebSQL (ms)","IndexedDB (ms)","Diff (ms)","Percentage"],["Table5Columns: Insert 1000 rows",30.93,164.46,133.53,531.72],["Table5Columns: Query with filters [[\"col0\",\"Green\"]]",4.22,26.29,22.07,622.99],["Table5Columns: Query with filters [[\"col2\",\"Red\"],[\"col4\",\"Blue\"]]",5.11,36.91,31.8,722.31],["Table5Columns: Query with filters [[\"guid\",\"500\"]]",2.82,0.99,-1.83,35.11],["Table5Columns: Insert 10000 rows",191.59,1410.54,1218.95,736.23],["Table5Columns: Insert 50000 rows",1155.03,8680.71,7525.68,751.56],["Table10Columns: Insert 1000 rows",35.14,2474.44,2439.3,7041.66],["Table10Columns: Insert 10000 rows",267.84,2065.14,1797.3,771.03],["Table10Columns: Insert 50000 rows",1344.57,14166.23,12821.66,1053.59],["Table15Columns: Insert 1000 rows",46.71,4234.36,4187.65,9065.21],["Table15Columns: Insert 10000 rows",432.72,2703.68,2270.96,624.81],["Table15Columns: Insert 50000 rows",1637.25,19121.34,17484.09,1167.89],["Table20Columns: Insert 1000 rows",53.18,4597.17,4543.99,8644.55],["Table20Columns: Insert 10000 rows",505.67,3459.1,2953.43,684.06],["Table20Columns: Insert 50000 rows",2005.16,22551.68,20546.52,1124.68],["Table20Columns: Query with filters [[\"col0\",\"Green\"]]",161.93,2991.57,2829.64,1847.45],["Table20Columns: Query with filters [[\"col2\",\"Red\"],[\"col6\",\"Blue\"]]",286.19,1894.02,1607.8, 0]]},
    {"agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:71.0) Gecko/20100101 Firefox/71.0","results":[["Test Case","WebSQL (ms)","IndexedDB (ms)","Diff (ms)","Percentage"],["Table5Columns: Insert 1000 rows",-1,671],["Table5Columns: Query with filters [[\"col0\",\"Green\"]]",-1,33],["Table5Columns: Query with filters [[\"col2\",\"Red\"],[\"col4\",\"Blue\"]]",-1,27],["Table5Columns: Query with filters [[\"guid\",\"500\"]]",-1,1],["Table5Columns: Insert 10000 rows",-1,931],["Table5Columns: Insert 50000 rows",-1,4439],["Table10Columns: Insert 1000 rows",-1,227],["Table10Columns: Insert 10000 rows",-1,1164],["Table10Columns: Insert 50000 rows",-1,6464],["Table15Columns: Insert 1000 rows",-1,268],["Table15Columns: Insert 10000 rows",-1,1651],["Table15Columns: Insert 50000 rows",-1,8823],["Table20Columns: Insert 1000 rows",-1,239],["Table20Columns: Insert 10000 rows",-1,1898],["Table20Columns: Insert 50000 rows",-1,10523],["Table20Columns: Query with filters [[\"col0\",\"Green\"]]",-1,8152],["Table20Columns: Query with filters [[\"col2\",\"Red\"],[\"col6\",\"Blue\"]]",-1,12491],["Table20Columns: Query with filters [[\"guid\",\"25000\"]]",-1,1]]},
    {"agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36","results":[["Test Case","WebSQL (ms)","IndexedDB (ms)","Diff (ms)","Percentage"],["Table5Columns: Insert 1000 rows",41.27,128.33,87.06,310.95],["Table5Columns: Query with filters [[\"col0\",\"Green\"]]",3.38,16.63,13.25,492.01],["Table5Columns: Query with filters [[\"col2\",\"Red\"],[\"col4\",\"Blue\"]]",3.05,25.42,22.37,833.44],["Table5Columns: Query with filters [[\"guid\",\"500\"]]",1.33,0.67,-0.66,50.38],["Table5Columns: Insert 10000 rows",171.32,969.35,798.03,565.81],["Table5Columns: Insert 50000 rows",763.5,5834.08,5070.58,764.12],["Table10Columns: Insert 1000 rows",43.82,1739.11,1695.29,3968.76],["Table10Columns: Insert 10000 rows",270.96,1323.95,1052.99,488.61],["Table10Columns: Insert 50000 rows",1042.91,8327.13,7284.22,798.45],["Table15Columns: Insert 1000 rows",52.11,3143.45,3091.34,6032.34],["Table15Columns: Insert 10000 rows",327.12,1759.97,1432.85,538.02],["Table15Columns: Insert 50000 rows",1320.28,11137.15,9816.87,843.54],["Table20Columns: Insert 1000 rows",58.51,3356.96,3298.45,5737.41],["Table20Columns: Insert 10000 rows",350.62,2231.32,1880.7,636.39],["Table20Columns: Insert 50000 rows",1708.83,16668.83,14960,975.45],["Table20Columns: Query with filters [[\"col0\",\"Green\"]]",109.32,1614.99,1505.67,1477.31],["Table20Columns: Query with filters [[\"col2\",\"Red\"],[\"col6\",\"Blue\"]]",195.86,1431.19,1235.33,730.72],["Table20Columns: Query with filters [[\"guid\",\"25000\"]]",6.47,3.47,-3,53.63]]},
    // Ekrem
    {"agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.92 Safari/537.36","results":[["Test Case","WebSQL (ms)","IndexedDB (ms)","Diff (ms)","Percentage"],["Table5Columns: Insert 1000 rows",28.97,3618.32,3589.35,12489.89],["Table5Columns: Query with filters [[\"col0\",\"Green\"]]",5.87,1664.8,1658.93,28361.16],["Table5Columns: Query with filters [[\"col2\",\"Red\"],[\"col4\",\"Blue\"]]",4.96,53.44,48.48,1077.42],["Table5Columns: Query with filters [[\"guid\",\"500\"]]",3.77,1.72,-2.05,45.62],["Table5Columns: Insert 10000 rows",241.18,3378.67,3137.49,1400.89],["Table5Columns: Insert 50000 rows",927.06,12203.39,11276.33,1316.35],["Table10Columns: Insert 1000 rows",41.09,789.36,748.27,1921.05],["Table10Columns: Insert 10000 rows",305.71,3055.23,2749.52,999.39],["Table10Columns: Insert 50000 rows",1273.47,15632.21,14358.74,1227.53],["Table15Columns: Insert 1000 rows",47.12,859.5,812.38,1824.07],["Table15Columns: Insert 10000 rows",404.39,3754.86,3350.47,928.52],["Table15Columns: Insert 50000 rows",1646.29,21124.35,19478.06,1283.15],["Table20Columns: Insert 1000 rows",83.07,965.64,882.57,1162.44],["Table20Columns: Insert 10000 rows",545.94,5737.11,5191.17,1050.87],["Table20Columns: Insert 50000 rows",2616.58,26128.12,23511.54,998.56],["Table20Columns: Query with filters [[\"col0\",\"Green\"]]",181.95,3336.31,3154.36,1833.64],["Table20Columns: Query with filters [[\"col2\",\"Red\"],[\"col6\",\"Blue\"]]",287.62,2707.9,2420.28,941.49],["Table20Columns: Query with filters [[\"guid\",\"25000\"]]",15.02,2.18,-12.84,14.51]]},
    {"agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:74.0) Gecko/20100101 Firefox/74.0","results":[["Test Case","WebSQL (ms)","IndexedDB (ms)","Diff (ms)","Percentage"],["Table5Columns: Insert 1000 rows",-1,194],["Table5Columns: Query with filters [[\"col0\",\"Green\"]]",-1,12],["Table5Columns: Query with filters [[\"col2\",\"Red\"],[\"col4\",\"Blue\"]]",-1,21],["Table5Columns: Query with filters [[\"guid\",\"500\"]]",-1,2],["Table5Columns: Insert 10000 rows",-1,1126],["Table5Columns: Insert 50000 rows",-1,5352],["Table10Columns: Insert 1000 rows",-1,184],["Table10Columns: Insert 10000 rows",-1,1353],["Table10Columns: Insert 50000 rows",-1,7084],["Table15Columns: Insert 1000 rows",-1,218],["Table15Columns: Insert 10000 rows",-1,1669],["Table15Columns: Insert 50000 rows",-1,8602],["Table20Columns: Insert 1000 rows",-1,238],["Table20Columns: Insert 10000 rows",-1,2141],["Table20Columns: Insert 50000 rows",-1,10847],["Table20Columns: Query with filters [[\"col0\",\"Green\"]]",-1,471],["Table20Columns: Query with filters [[\"col2\",\"Red\"],[\"col6\",\"Blue\"]]",-1,586],["Table20Columns: Query with filters [[\"guid\",\"25000\"]]",-1,1]]},
    {"agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36 Edge/18.18362","results":[["Test Case","WebSQL (ms)","IndexedDB (ms)","Diff (ms)","Percentage"],["Table5Columns: Insert 1000 rows",-1,295.5],["Table5Columns: Query with filters [[\"col0\",\"Green\"]]",-1,78.7],["Table5Columns: Query with filters [[\"col2\",\"Red\"],[\"col4\",\"Blue\"]]",-1,77.4],["Table5Columns: Query with filters [[\"guid\",\"500\"]]",-1,4.3],["Table5Columns: Insert 10000 rows",-1,2784.7],["Table5Columns: Insert 50000 rows",-1,27694.7],["Table10Columns: Insert 1000 rows",-1,1524.6],["Table10Columns: Insert 10000 rows",-1,8037.7],["Table10Columns: Insert 50000 rows",-1,61371.4],["Table15Columns: Insert 1000 rows",-1,3759.9],["Table15Columns: Insert 10000 rows",-1,19864.5],["Table15Columns: Insert 50000 rows",-1,124508.7],["Table20Columns: Insert 1000 rows",-1,7790.3],["Table20Columns: Insert 10000 rows",-1,34658.1],["Table20Columns: Insert 50000 rows",-1,205034.8],["Table20Columns: Query with filters [[\"col0\",\"Green\"]]",-1,12037.4],["Table20Columns: Query with filters [[\"col2\",\"Red\"],[\"col6\",\"Blue\"]]",-1,22073.1],["Table20Columns: Query with filters [[\"guid\",\"25000\"]]",-1,22.9]]},

    // Mitya
     {"agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:74.0) Gecko/20100101 Firefox/74.0","results":[["Test Case","WebSQL (ms)","IndexedDB (ms)","Diff (ms)","Percentage"],["Table5Columns: Insert 1000 rows",-1,399],["Table5Columns: Query with filters [[\"col0\",\"Green\"]]",-1,43],["Table5Columns: Query with filters [[\"col2\",\"Red\"],[\"col4\",\"Blue\"]]",-1,32],["Table5Columns: Query with filters [[\"guid\",\"500\"]]",-1,3],["Table5Columns: Insert 10000 rows",-1,1998],["Table5Columns: Insert 50000 rows",-1,10499],["Table10Columns: Insert 1000 rows",-1,235],["Table10Columns: Insert 10000 rows",-1,2453],["Table10Columns: Insert 50000 rows",-1,12911],["Table15Columns: Insert 1000 rows",-1,362],["Table15Columns: Insert 10000 rows",-1,3492],["Table15Columns: Insert 50000 rows",-1,16490],["Table20Columns: Insert 1000 rows",-1,448],["Table20Columns: Insert 10000 rows",-1,4409],["Table20Columns: Insert 50000 rows",-1,20106],["Table20Columns: Query with filters [[\"col0\",\"Green\"]]",-1,510],["Table20Columns: Query with filters [[\"col2\",\"Red\"],[\"col6\",\"Blue\"]]",-1,693],["Table20Columns: Query with filters [[\"guid\",\"25000\"]]",-1,1]]},
     // Mitya - Firefox Mobile
     {"agent":"Mozilla/5.0 (Android 10; Mobile; rv:68.0) Gecko/68.0 Firefox/68.0","results":[["Test Case","WebSQL (ms)","IndexedDB (ms)","Diff (ms)","Percentage"],["Table5Columns: Insert 1000 rows",-1,502],["Table5Columns: Query with filters [[\"col0\",\"Green\"]]",-1,104],["Table5Columns: Query with filters [[\"col2\",\"Red\"],[\"col4\",\"Blue\"]]",-1,145],["Table5Columns: Query with filters [[\"guid\",\"500\"]]",-1,5],["Table5Columns: Insert 10000 rows",-1,3199],["Table5Columns: Insert 50000 rows",-1,18288],["Table10Columns: Insert 1000 rows",-1,950],["Table10Columns: Insert 10000 rows",-1,3838],["Table10Columns: Insert 50000 rows",-1,20167],["Table15Columns: Insert 1000 rows",-1,828],["Table15Columns: Insert 10000 rows",-1,4575],["Table15Columns: Insert 50000 rows",-1,23681],["Table20Columns: Insert 1000 rows",-1,982],["Table20Columns: Insert 10000 rows",-1,7048],["Table20Columns: Insert 50000 rows",-1,32372],["Table20Columns: Query with filters [[\"col0\",\"Green\"]]",-1,23360],["Table20Columns: Query with filters [[\"col2\",\"Red\"],[\"col6\",\"Blue\"]]",-1,17961],["Table20Columns: Query with filters [[\"guid\",\"25000\"]]",-1,5]]},
     // Mitya - Chrome Mobile
     {"agent":"Mozilla/5.0 (Linux; Android 10; SM-G960F) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.162 Mobile Safari/537.36","results":[["Test Case","WebSQL (ms)","IndexedDB (ms)","Diff (ms)","Percentage"],["Table5Columns: Insert 1000 rows",75.3,575.9,500.6,764.81],["Table5Columns: Query with filters [[\"col0\",\"Green\"]]",38.1,252.1,214,661.68],["Table5Columns: Query with filters [[\"col2\",\"Red\"],[\"col4\",\"Blue\"]]",72.3,644,571.7,890.73],["Table5Columns: Query with filters [[\"guid\",\"500\"]]",30.9,13,-17.9,42.07],["Table5Columns: Insert 10000 rows",328.5,4659.8,4331.3,1418.51],["Table5Columns: Insert 50000 rows",1743.2,24657.2,22914,1414.48],["Table10Columns: Insert 1000 rows",110.2,1037.3,927.1,941.29],["Table10Columns: Insert 10000 rows",564.4,6966.9,6402.5,1234.39],["Table10Columns: Insert 50000 rows",2251.4,37219,34967.6,1653.15],["Table15Columns: Insert 1000 rows",116.5,2004.5,1888,1720.6],["Table15Columns: Insert 10000 rows",770.6,8540.7,7770.1,1108.32],["Table15Columns: Insert 50000 rows",2801.9,47447.5,44645.6,1693.4],["Table20Columns: Insert 1000 rows",130.9,3845.6,3714.7,2937.82],["Table20Columns: Insert 10000 rows",1002,10695.3,9693.3,1067.4],["Table20Columns: Insert 50000 rows",3563.7,61725.1,58161.4,1732.05],["Table20Columns: Query with filters [[\"col0\",\"Green\"]]",404.4,12153,11748.6,3005.19],["Table20Columns: Query with filters [[\"col2\",\"Red\"],[\"col6\",\"Blue\"]]",803.3,10553.6,9750.3,1313.78],["Table20Columns: Query with filters [[\"guid\",\"25000\"]]",74.5,16.8,-57.7,22.55]]},
     // Ekrem - Chrome Mobile 
     {"agent":"Mozilla/5.0 (Linux; Android 9; SM-G950F) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.162 Mobile Safari/537.36","results":[["Test Case","WebSQL (ms)","IndexedDB (ms)","Diff (ms)","Percentage"],["Table5Columns: Insert 1000 rows",203.2,785.9,582.7,386.76],["Table5Columns: Query with filters [[\"col0\",\"Green\"]]",26.5,301.7,275.2,1138.49],["Table5Columns: Query with filters [[\"col2\",\"Red\"],[\"col4\",\"Blue\"]]",22.7,385.5,362.8,1698.24],["Table5Columns: Query with filters [[\"guid\",\"500\"]]",20.6,8.4,-12.2,40.78],["Table5Columns: Insert 10000 rows",518.7,4714.9,4196.2,908.98],["Table5Columns: Insert 50000 rows",2524.5,25898.9,23374.4,1025.9],["Table10Columns: Insert 1000 rows",105.4,1350.5,1245.1,1281.31],["Table10Columns: Insert 10000 rows",837.8,7262.6,6424.8,866.87],["Table10Columns: Insert 50000 rows",3792.3,51383.5,47591.2,1354.94],["Table15Columns: Insert 1000 rows",179.2,3512.7,3333.5,1960.21],["Table15Columns: Insert 10000 rows",1224.3,11187.9,9963.6,913.82],["Table15Columns: Insert 50000 rows",6378.2,80094.3,73716.1,1255.75],["Table20Columns: Insert 1000 rows",1029.1,7443.7,6414.6,723.32],["Table20Columns: Insert 10000 rows",2766.6,14910.8,12144.2,538.96],["Table20Columns: Insert 50000 rows",7449.3,77364.8,69915.5,1038.55],["Table20Columns: Query with filters [[\"col0\",\"Green\"]]",581.7,12879.1,12297.4,2214.05],["Table20Columns: Query with filters [[\"col2\",\"Red\"],[\"col6\",\"Blue\"]]",1106.2,6250.7,5144.5,565.06],["Table20Columns: Query with filters [[\"guid\",\"25000\"]]",71.1,8.9,-62.2,12.52]]},
     // Mitya -Safari
     {"agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Safari/605.1.15","results":[["Test Case","WebSQL (ms)","IndexedDB (ms)","Diff (ms)","Percentage"],["Table5Columns: Insert 1000 rows",-1,127],["Table5Columns: Query with filters [[\"col0\",\"Green\"]]",-1,46],["Table5Columns: Query with filters [[\"col2\",\"Red\"],[\"col4\",\"Blue\"]]",-1,66],["Table5Columns: Query with filters [[\"guid\",\"500\"]]",-1,1],["Table5Columns: Insert 10000 rows",-1,1195],["Table5Columns: Insert 50000 rows",-1,7514],["Table10Columns: Insert 1000 rows",-1,204],["Table10Columns: Insert 10000 rows",-1,1829],["Table10Columns: Insert 50000 rows",-1,10355],["Table15Columns: Insert 1000 rows",-1,232],["Table15Columns: Insert 10000 rows",-1,2219],["Table15Columns: Insert 50000 rows",-1,11976],["Table20Columns: Insert 1000 rows",-1,247],["Table20Columns: Insert 10000 rows",-1,2349],["Table20Columns: Insert 50000 rows",-1,17027],["Table20Columns: Query with filters [[\"col0\",\"Green\"]]",-1,2650],["Table20Columns: Query with filters [[\"col2\",\"Red\"],[\"col6\",\"Blue\"]]",-1,4332],["Table20Columns: Query with filters [[\"guid\",\"25000\"]]",-1,2]]},
     // Robin - Safari
     {"agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Safari/605.1.15","results":[["Test Case","WebSQL (ms)","IndexedDB (ms)","Diff (ms)","Percentage"],["Table5Columns: Insert 1000 rows",-1,39],["Table5Columns: Query with filters [[\"col0\",\"Green\"]]",-1,26],["Table5Columns: Query with filters [[\"col2\",\"Red\"],[\"col4\",\"Blue\"]]",-1,28],["Table5Columns: Query with filters [[\"guid\",\"500\"]]",-1,1],["Table5Columns: Insert 10000 rows",-1,295],["Table5Columns: Insert 50000 rows",-1,1513],["Table10Columns: Insert 1000 rows",-1,50],["Table10Columns: Insert 10000 rows",-1,313],["Table10Columns: Insert 50000 rows",-1,1568],["Table15Columns: Insert 1000 rows",-1,44],["Table15Columns: Insert 10000 rows",-1,323],["Table15Columns: Insert 50000 rows",-1,1610],["Table20Columns: Insert 1000 rows",-1,48],["Table20Columns: Insert 10000 rows",-1,375],["Table20Columns: Insert 50000 rows",-1,1958],["Table20Columns: Query with filters [[\"col0\",\"Green\"]]",-1,1003],["Table20Columns: Query with filters [[\"col2\",\"Red\"],[\"col6\",\"Blue\"]]",-1,1141],["Table20Columns: Query with filters [[\"guid\",\"25000\"]]",-1,1]]},
     // Edge 84 - Ekrem
     {"agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4130.0 Safari/537.36 Edg/84.0.502.0","results":[["Test Case","WebSQL (ms)","IndexedDB (ms)","Diff (ms)","Percentage"],["Table5Columns: Insert 1000 rows",30.32,280.88,250.56,926.39],["Table5Columns: Query with filters [[\"col0\",\"Green\"]]",3.99,17.77,13.78,445.36],["Table5Columns: Query with filters [[\"col2\",\"Red\"],[\"col4\",\"Blue\"]]",5.12,59.5,54.38,1162.11],["Table5Columns: Query with filters [[\"guid\",\"500\"]]",4.42,1.98,-2.44,44.8],["Table5Columns: Insert 10000 rows",170.48,2779.19,2608.71,1630.21],["Table5Columns: Insert 50000 rows",860.55,14579.34,13718.79,1694.19],["Table10Columns: Insert 1000 rows",48.49,964.34,915.85,1988.74],["Table10Columns: Insert 10000 rows",284.32,3979.07,3694.75,1399.5],["Table10Columns: Insert 50000 rows",1311.6,18358.88,17047.28,1399.73],["Table15Columns: Insert 1000 rows",76.82,2408.68,2331.86,3135.49],["Table15Columns: Insert 10000 rows",377.24,4419.44,4042.2,1171.52],["Table15Columns: Insert 50000 rows",1650.86,21605.91,19955.05,1308.77],["Table20Columns: Insert 1000 rows",77.32,2466.53,2389.21,3190.03],["Table20Columns: Insert 10000 rows",674.14,7741.25,7067.11,1148.31],["Table20Columns: Insert 50000 rows",1992.03,25585.82,23593.79,1284.41],["Table20Columns: Query with filters [[\"col0\",\"Green\"]]",188.34,995.55,807.21,528.59],["Table20Columns: Query with filters [[\"col2\",\"Red\"],[\"col6\",\"Blue\"]]",340.38,3779.65,3439.27,1110.42],["Table20Columns: Query with filters [[\"guid\",\"25000\"]]",18.17,12.99,-5.18,71.49]]}
];

const combinedResults = runs.map(run => {
    const resultsTable = run.results;

    // remove header
    resultsTable.splice(0, 1);

    // remove unnecessary columns
    resultsTable.forEach(row => row.splice(3));

    // add browser as first column
    const browser = getBrowser(run.agent);
    resultsTable.forEach(row => row.splice(0, 0, browser));

    return resultsTable;
}).reduce((x, y) => x.concat(y), []); //flatMap

const browsers = [...new Set(combinedResults.map(c => c[0]))];

const aggregatedResults = [["Test name"].concat(...browsers.map(b => ([b + "WebSQL", b + "IndexedDB"])))]
    .concat(combinedResults.reduce((agg, resultRow) => {
        let testRow = agg.find(row => row[0] === resultRow[1]);
        if (testRow === undefined) {
            testRow = [resultRow[1]];
            
            for(let i = 0; i < browsers.length * 2; i++) {
                testRow.push([]);
            }

            agg.push(testRow);
        }

        addResult("WebSQL", resultRow[2]);
        addResult("IndexedDB", resultRow[3]);
      
        return agg;

        function addResult(db, value) {
            if (value === -1) {
                return;
            }
            const browserIndex = browsers.indexOf(resultRow[0]);
            const i = browserIndex * 2 + (db === "WebSQL" ? 1 : 2);

            testRow[i].push(value);
        }
}, []));

// Sum
console.table(report(aggregatedResults, vals => vals.reduce((total, value) => total + value, 0)));

// Avg
console.table(report(aggregatedResults, vals => vals.length > 0 ? vals.reduce((total, value) => total + value, 0) / vals.length : 0));

// Sample count
console.table(report(aggregatedResults, vals => vals.length));

function report(table, calc) {
    return table.map(row => {
        return [...row.map(values => Array.isArray(values) ? roundToTwo(calc(values)) : values)];
    })
}

function getBrowser(agent) {

    if (agent.match(/Edg/) != null) {
        return "Edge (Chrome based)";
    }

    if (agent.match(/Firefox/) != null) {
        return "Firefox";
    }

    if (agent.match(/Chrome/) != null) {
        return "Chrome";
    }

    if (agent.match(/Safari/) != null) {
        return "Safari";
    }

    return "Other"
}

function roundToTwo(num) {
    return +(Math.round(num + "e+2")  + "e-2");
}